<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Food Safety Certification</title>
    <style>
        :root { --primary: #2c3e50; --accent: #e67e22; --success: #27ae60; --danger: #c0392b; --bg: #121212; --card-bg: #1e1e1e; --text: #ecf0f1; }
        
        /* Layout & Typography */
        html, body { height: 100%; margin: 0; padding: 0; background-color: var(--bg); font-family: 'Segoe UI', system-ui, sans-serif; color: var(--text); overflow: hidden; display: flex; flex-direction: column; }
        
        /* === NAVIGATION TABS === */
        .tabs { height: 60px; background: #000; border-bottom: 2px solid #333; display: flex; flex-shrink: 0; z-index: 100; }
        .tab { flex: 1; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.1em; cursor: pointer; transition: 0.3s; opacity: 0.6; background: #111; border-right: 1px solid #222; }
        .tab.active { opacity: 1; border-bottom: 4px solid var(--accent); background: #222; color: var(--accent); }
        .tab-icon { margin-right: 8px; font-size: 1.2em; }

        /* === CONTENT AREA === */
        .content-area { flex: 1; position: relative; width: 100%; overflow: hidden; }
        
        /* TAB 1: PRESENTATION */
        #view-presentation { width: 100%; height: 100%; display: block; position: absolute; top: 0; left: 0; }
        iframe { width: 100% !important; height: 100% !important; border: none; }

        /* TAB 2: GAME SIMULATION */
        #view-game { display: none; width: 100%; height: 100%; overflow-y: auto; padding: 20px; box-sizing: border-box; background: var(--bg); scroll-behavior: smooth; }
        
        /* Game Styling */
        h2 { color: var(--accent); text-transform: uppercase; letter-spacing: 1px; font-size: 1.5rem; text-align: center; margin-bottom: 5px; }
        .module-header { background: #333; padding: 10px 20px; border-radius: 8px; margin: 30px 0 15px 0; font-size: 1.1em; font-weight: bold; border-left: 5px solid var(--accent); color: #fff; display: flex; align-items: center; }
        
        .game-card { background: var(--card-bg); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #333; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .question-text { font-size: 1rem; margin-bottom: 12px; line-height: 1.4; color: #ddd; }
        
        /* Interactive Elements */
        .btn-grid { display: grid; grid-template-columns: 1fr; gap: 8px; }
        button.choice-btn { background: #333; color: white; border: 1px solid #444; padding: 12px 15px; border-radius: 6px; font-size: 0.95rem; text-align: left; cursor: pointer; transition: 0.2s; width: 100%; }
        button.choice-btn:active { transform: scale(0.98); }
        
        /* Specific Styles for Modules */
        .toxicant-badge { display: inline-block; padding: 4px 8px; background: #444; border-radius: 4px; font-size: 0.8em; margin-bottom: 8px; color: #aaa; }
        
        /* Additives Drag Area */
        .category-container { display: flex; gap: 10px; margin-top: 10px; }
        .category-box { flex: 1; padding: 15px; background: #252525; border: 2px dashed #555; border-radius: 8px; text-align: center; min-height: 50px; }
        
        /* Certification */
        #cert-area { text-align: center; display: none; margin-top: 40px; padding: 30px; background: radial-gradient(circle, #222 0%, #000 100%); border-radius: 20px; border: 2px solid gold; animation: popIn 0.6s ease-out; }
        .seal { width: 120px; height: 120px; background: gold; color: #000; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 15px; font-weight: 900; font-size: 1.5em; box-shadow: 0 0 30px rgba(255, 215, 0, 0.4); border: 5px double #b8860b; }

        /* Feedback Toast */
        #feedback { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #333; padding: 12px 25px; border-radius: 30px; display: none; z-index: 2000; box-shadow: 0 5px 20px black; font-weight: bold; width: 80%; text-align: center; }

        /* Orientation Warning */
        #rotate-warning { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 9999; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; box-sizing: border-box; }
        @media screen and (orientation: portrait) { #rotate-warning { display: flex; } }
        
        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

    <div id="rotate-warning">
        <div style="font-size: 50px; margin-bottom: 20px;">üì±‚ÜîÔ∏è</div>
        <h2>Please Rotate Your Phone</h2>
        <p>This training app is designed for Landscape mode.</p>
    </div>

    <div class="tabs">
        <div id="btn-presentation" class="tab active" onclick="openTab('presentation')">
            <span class="tab-icon">üì∫</span> Presentation
        </div>
        <div id="btn-game" class="tab" onclick="openTab('game')">
            <span class="tab-icon">üéì</span> Gamified Learning
        </div>
    </div>

    <div class="content-area">
        
        <div id="view-presentation">
            <iframe 
                src="https://docs.google.com/presentation/d/e/2PACX-1vTz8Tmi5ouE7N7GEqvDcMiKy_8Of8zj2hAV39sGJQ33QGX_d8SZ1_v-sU1gjR38lECFcM9FT95zEU_O/pubembed?start=false&loop=false&delayms=3000" 
                frameborder="0" 
                allowfullscreen="true" 
                mozallowfullscreen="true" 
                webkitallowfullscreen="true">
            </iframe>
        </div>

        <div id="view-game">
            <div style="text-align: center;">
                <h2>Food Hygiene Certification</h2>
                <p style="color: #888; font-size: 0.9em;">Score: <span id="score" style="color:var(--accent); font-weight:bold;">0</span> / 100</p>
                <div style="width: 100%; background: #333; height: 6px; border-radius: 3px; margin-top: 10px;">
                    <div id="progress-bar" style="width: 0%; height: 100%; background: var(--success); border-radius: 3px; transition: 0.3s;"></div>
                </div>
            </div>

            <div class="module-header">üì¶ The 6 Food Toxicants</div>

            <div class="game-card">
                <span class="toxicant-badge">Case #1: Paralysis</span>
                <div class="question-text">Patient presents with "Scissor Gait" and spastic paralysis of lower limbs. He consumes a specific pulse daily. Which toxin is responsible?</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, false)">A) Sanguinarine</button>
                    <button class="choice-btn" onclick="check(this, true, 'Correct! BOAA in Khesari Dal causes Neurolathyrism.')">B) BOAA (Beta-oxalyl-amino-alanine)</button>
                    <button class="choice-btn" onclick="check(this, false)">C) Pyrrolizidine alkaloids</button>
                </div>
            </div>

            <div class="game-card">
                <span class="toxicant-badge">Case #2: Liver Damage</span>
                <div class="question-text">Inspection of a godown reveals groundnuts stored at high moisture (>16%). Fungal growth is visible. What is the major health risk?</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, true, 'Yes! Aspergillus flavus produces Aflatoxins which are Hepatotoxic & Carcinogenic.')">A) Hepatocellular Carcinoma (Liver Cancer)</button>
                    <button class="choice-btn" onclick="check(this, false)">B) Renal Failure</button>
                    <button class="choice-btn" onclick="check(this, false)">C) Cardiac Failure</button>
                </div>
            </div>

            <div class="game-card">
                <span class="toxicant-badge">Case #3: Gangrene</span>
                <div class="question-text">Bajra crop has blackish seeds. Consumption caused burning sensation and peripheral gangrene. Identify the fungus.</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, false)">A) Fusarium incarnatum</button>
                    <button class="choice-btn" onclick="check(this, true, 'Correct. Claviceps purpurea causes Ergotism.')">B) Claviceps purpurea</button>
                </div>
            </div>

            <div class="game-card">
                <span class="toxicant-badge">Case #4: Swelling & Blindness</span>
                <div class="question-text">Mass outbreak of leg swelling and Glaucoma. Suspected Mustard Oil contamination. Which seed resembles mustard?</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, false)">A) Crotalaria seeds</button>
                    <button class="choice-btn" onclick="check(this, true, 'Correct. Argemone mexicana (Prickly Poppy) seeds.')">B) Argemone seeds</button>
                </div>
            </div>

            <div class="game-card">
                <span class="toxicant-badge">Case #5: Rapid Fluid Accumulation</span>
                <div class="question-text">Tribal population in MP eating 'Gondhli' millet developed massive Ascites rapidly. The millet was contaminated with 'Jhunjhunia'. What is the toxin?</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, true, 'Right. Pyrrolizidine alkaloids cause Endemic Ascites.')">A) Pyrrolizidine alkaloids</button>
                    <button class="choice-btn" onclick="check(this, false)">B) Aflatoxin M1</button>
                </div>
            </div>

            <div class="game-card">
                <span class="toxicant-badge">Case #6: Neglected Toxin</span>
                <div class="question-text">Which crops are most susceptible to Fusarium toxins?</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, false)">A) Pulses and Grams</button>
                    <button class="choice-btn" onclick="check(this, true, 'Correct. Sorghum (Jowar) and Wheat are common substrates.')">B) Sorghum and Wheat</button>
                </div>
            </div>

            <div class="module-header">üß™ Food Additives</div>
            <div class="game-card">
                <div class="question-text">Classify "Sodium Benzoate" used in jams vs "Pesticide Residue" found in milk.</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, true, 'Correct! Preservatives are Intentional (Cat 1), Residues are Incidental (Cat 2).')">A) Benzoate is Category 1 (Intentional); Pesticide is Category 2 (Incidental)</button>
                    <button class="choice-btn" onclick="check(this, false)">B) Both are Category 1</button>
                </div>
            </div>

            <div class="module-header">üõ°Ô∏è Fortification Architects</div>
            <div class="game-card">
                <div class="question-text"><strong>Match the Vehicle to the Nutrient:</strong><br>To combat Endemic Goitre, what did we fortify?</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, false)">A) Water with Fluoride</button>
                    <button class="choice-btn" onclick="check(this, true, 'Correct. Salt Iodization is a classic fortification success.')">B) Salt with Iodine</button>
                </div>
            </div>
            <div class="game-card">
                <div class="question-text">What is a key characteristic of a good fortification vehicle?</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, true, 'Yes. It must be consumed consistently by the population.')">A) Consumed consistently by the target population</button>
                    <button class="choice-btn" onclick="check(this, false)">B) Changes the taste significantly</button>
                </div>
            </div>

            <div class="module-header">üïµÔ∏è You go for a Market Raid</div>
            <div class="game-card">
                <div class="question-text"><strong>Identify the Adulterant in this item commonly used in every kitchen:</strong><br>The "Turmeric Powder" looks very bright yellow but tests positive for a Carcinogen. What is it?</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, false)">A) Chicory Powder</button>
                    <button class="choice-btn" onclick="check(this, true, 'Correct. Metanil Yellow is a banned coal-tar dye.')">B) Metanil Yellow</button>
                </div>
            </div>
            <div class="game-card">
                <div class="question-text"><strong>Identify the Adulterant:</strong><br>Black Pepper seeds seem to contain dried seeds of a fruit. Which fruit?</div>
                <div class="btn-grid">
                    <button class="choice-btn" onclick="check(this, true, 'Correct. Papaya seeds resemble black pepper.')">A) Papaya</button>
                    <button class="choice-btn" onclick="check(this, false)">B) Tamarind</button>
                </div>
            </div>

            <div class="module-header">üìú Just for fun - Get Food Safety Certified </div>
            <div class="game-card" style="text-align: center;">
                <p>You have completed the inspection. Submit to generate your certification.</p>
                <button class="choice-btn" style="background: var(--success); text-align: center; font-weight: bold;" onclick="generateCert()">SUBMIT FINAL REPORT</button>
            </div>

            <div id="cert-area">
                <div class="seal">NOW</div>
                <h1 style="color: gold; margin: 10px 0;">CERTIFIED</h1>
                <h3 style="margin: 0;">in Food Hygiene & Safety</h3>
                <p style="color: #aaa; margin-top: 10px;">Community Medicine for All</p>
                <div style="font-size: 0.8em; color: #666; margin-top: 20px;">Verified: Dr. B. Manoj Aravind</div>
            </div>

            <div style="height: 60px;"></div>
        </div>
    </div>

    <div id="feedback"></div>

    <script>
        // --- LOGIC ---
        let score = 0;
        const totalPoints = 110; // 11 questions * 10 points
        
        function openTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById('btn-' + tabName).classList.add('active');
            
            document.getElementById('view-presentation').style.display = (tabName === 'presentation') ? 'block' : 'none';
            document.getElementById('view-game').style.display = (tabName === 'game') ? 'block' : 'none';
        }

        function check(btn, isCorrect, feedbackMsg) {
            // Disable siblings
            const siblings = btn.parentElement.children;
            for(let b of siblings) b.disabled = true;

            if(isCorrect) {
                btn.style.background = 'var(--success)';
                btn.style.borderColor = 'var(--success)';
                btn.innerHTML += " ‚úÖ";
                score += 10;
                showToast(feedbackMsg || "Correct Answer!", true);
            } else {
                btn.style.background = 'var(--danger)';
                btn.style.borderColor = 'var(--danger)';
                btn.innerHTML += " ‚ùå";
                showToast("Incorrect.", false);
            }
            updateProgress();
        }

        function updateProgress() {
            document.getElementById('score').innerText = score;
            const pct = (score / totalPoints) * 100;
            document.getElementById('progress-bar').style.width = pct + "%";
        }

        function showToast(msg, isGood) {
            const f = document.getElementById('feedback');
            f.textContent = msg;
            f.style.borderLeft = isGood ? "5px solid var(--success)" : "5px solid var(--danger)";
            f.style.display = 'block';
            setTimeout(() => f.style.display = 'none', 4000);
        }

        function generateCert() {
            const cert = document.getElementById('cert-area');
            cert.style.display = 'block';
            cert.scrollIntoView({ behavior: 'smooth' });
            
            if(score === 0) {
                // Participation award if they just clicked submit
                document.querySelector('.seal').innerText = "FAIL";
                document.querySelector('.seal').style.background = "#555";
                document.querySelector('h1').innerText = "PARTICIPATION";
            }
        }
    </script>
</body>
</html>
